//Cabin: Habitat Multiplier
@PART[dsak_cabin]:NEEDS[USILifeSupport]
{
	//@entryCost = 12000
	@cost = 6400
	//@title = Mk2 Rec Centre Short
	@description = Reinventing the classic cabin was a decision met with surprising amounts of approval from both C7 and USI... Not that C7 was expected to have a problem with the proposal anyway. Now with only 2 motorized recliners (with seatbelts) instead of 4 cramped airline seats and edge tables, there's plenty room for crew or tourists to stow and unpack novelty things, live like they're home, and let little ones crawl or float around all over the place.
	@tags = cck-lifesupport
	@category = none
	-MODEL {}
	MODEL
	{
		model = Squad/Parts/Utility/mk2CrewCabin/model
		texture = mk2CrewCabin, DeepSky/AirlineKuisine/Textures/cabin_usi
		texture = mk2CrewCabin_LUM, DeepSky/AirlineKuisine/Textures/cabin_LUM
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 4
		CrewCapacity = 2
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.035
		}
	}
	
	MODULE
    {
        name = ModuleConnectedLivingSpace
        passable = true
        passableWhenSurfaceAttached = true
    }
}

@PART[dsak_cabin2]:NEEDS[USILifeSupport]
{
	//@entryCost = 15000
	@cost = 7400
	//@title = Mk2 Rec Centre Long
	//@description = 
	@tags = cck-lifesupport
	@category = none
	-MODEL {}
	MODEL
	{
		model = DeepSky/AirlineKuisine/M2Xlab
		texture = mk2CrewCabin, DeepSky/AirlineKuisine/Textures/cabin2_usi
		texture = mk2CrewCabin_LUM, DeepSky/AirlineKuisine/Textures/cabin2_LUM
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 10
		CrewCapacity = 2
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.035
		}
	}
	
	MODULE
    {
        name = ModuleConnectedLivingSpace
        passable = true
        passableWhenSurfaceAttached = true
    }
}

//Processor A: Agroponics/Greenhouse
@PART[dsak_proc_a]:NEEDS[USILifeSupport]
{
	@entryCost = 13300
	@cost = 3310
	@title = Mk2 Inline Greenhouse
	@description = Deep Sky's Airline Kuisine division sought to ensure that those long flights on a spaceplane or other craft that straddle the line between a plane and a station are more livable. No such prospect is complete without a form-fitting greenhouse module. This greenhouse functions at 80% the capacity of a Nom-O-Matic 25000.
	@tags = cck-lifesupport
	@category = none
	@MODEL
	{
		@model = Squad/Parts/FuelTank/mk2FuselageShort/FuselageShortLFO
		@texture = mk2FuselageShort, DeepSky/AirlineKuisine/Textures/processors_usi
	}
	
	RESOURCE
	{
		name = Mulch
		amount = 0
		maxAmount = 80
	}
	RESOURCE
	{
		name = Supplies
		amount = 80
		maxAmount = 80
	}
	RESOURCE
	{
		name = Fertilizer
		amount = 80
		maxAmount = 80
	}
	RESOURCE
	{
		name = ElectricCharge
		amount = 160
		maxAmount = 160
	}
	
	
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Agroponics
		tag = Agroponics
		StartActionName = Start Agroponics
		StopActionName = Stop Agroponics
		INPUT_RESOURCE
		{
			ResourceName = Mulch
			Ratio =  0.00048000
		}
		INPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio =  0.00004800
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Supplies
			Ratio = 0.00052800
			DumpExcess = False
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.32
		}
	}	

	MODULE
	{
		name = ModuleConnectedLivingSpace
		passable = true
		surfaceAttachmentsPassable = true
	}
}

//Processor B: Life Support Recycler
@PART[dsak_proc_b]:NEEDS[USILifeSupport]
{
	@entryCost = 6000
	@cost = 3900
	@mass *= 1.6
	@title = Mk2 Inline Recycler
	@description = Rather than using the classical cylindrical volume within the Mk2 hull, the entire internal volume is leveraged to contain the essential biological and mechanical components. This recycler therefore reduces the consumption load for 4 kerbals at 65% efficiency.
	@tags = cck-lifesupport
	@category = none
	@MODEL
	{
		@model = Squad/Parts/FuelTank/mk2FuselageShort/FuselageShortLiquid
		@texture = mk2FuselageShort, DeepSky/AirlineKuisine/Textures/processors_usi
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 4
		RecyclePercent = .65
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 8.2
		}
	}
}

//Processor C: Fertilizer Sifter
@PART[dsak_proc_c]:NEEDS[USILifeSupport,!MKS]
{
	@entryCost = 18300
	@cost = 2270
	@mass *= 1.6
	@title = Mk2 Material Pocessing Unit
	@description = The last thing Deep Sky's planners could settle on for features to provide for USI's staff and clientelle was what to ship as the default module(s) for what is the otherwise all-purpose inline ISRU. However, it was only natural to choose the thing that keeps the plant food coming.
	@tags = cck-lifesupport
	@category = none
	@MODEL
	{
		@model = Squad/Parts/FuelTank/mk2FuselageShort/FuselageShortMono
		@texture = mk2FuselageShort, DeepSky/AirlineKuisine/Textures/processors_usi
	}
	
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Fertilizer (O)
		StartActionName = Start Fertilizer (O)
		StopActionName = Stop Fertilizer (O)

		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 2.5
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 30
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.0025
			DumpExcess = False
		}
	}
}
@PART[dsak_proc_c]:NEEDS[USILifeSupport,MKS]
{
	@entryCost = 18300
	@cost = 2270
	@title = Mk2 Material Pocessing Unit
	@description = The last thing Deep Sky's planners could settle on for features to provide for USI's staff and clientelle was what to ship as the default module(s) for what is the otherwise all-purpose inline ISRU. However, it was only natural to choose the thing that keeps the plant food coming.
	@tags = cck-lifesupport
	@category = none
	@MODEL
	{
		@model = Squad/Parts/FuelTank/mk2FuselageShort/FuselageShortMono
		@texture = mk2FuselageShort, DeepSky/AirlineKuisine/Textures/processors_usi
	}
	
	MODULE
	{
		name = ModuleOverheatDisplay	
	}
	
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Fertilizer (G)
		StartActionName = Start Fertilizer(G)
		StopActionName = Stop Fertilizer(G)
		Efficiency = 0.7
		GeneratesHeat = true
		AutoShutdown = true
		UseSpecialistBonus = false
		TemperatureModifier
		{
			key = 0 50000
			key = 500 20000
			key = 1000 5000
			key = 1500 2500
			key = 2000 500
			key = 3000 0
		}		
		ThermalEfficiency 
		{
			key = 0 0
			key = 500 0.15
			key = 1000 1.0
			key = 1500 0.25
			key = 2000 0.1
			key = 3000 0
		}
		
		//Ratios copied from MKS 2.5m MPU, Efficiency nerfed to compensate
		INPUT_RESOURCE
		{
			ResourceName = Gypsum
			Ratio =  0.003
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 4.5
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.0006
			DumpExcess = False
		}
	}
	
	MODULE
	{
		name = ModuleResourceConverter_USI
		ConverterName = Fertilizer (M)
		StartActionName = Start Fertilizer(M)
		StopActionName = Stop Fertilizer(M)
		Efficiency = 0.7
		GeneratesHeat = true
		AutoShutdown = true
		UseSpecialistBonus = false
		TemperatureModifier
		{
			key = 0 50000
			key = 500 20000
			key = 1000 5000
			key = 1500 2500
			key = 2000 500
			key = 3000 0
		}		
		ThermalEfficiency 
		{
			key = 0 0
			key = 500 0.15
			key = 1000 1.0
			key = 1500 0.25
			key = 2000 0.1
			key = 3000 0
		}
		
		//Ratios copied from MKS 2.5m MPU, Efficiency nerfed to compensate
		INPUT_RESOURCE
		{
			ResourceName = Minerals
			Ratio =  0.0047
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 5.64
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Fertilizer
			Ratio = 0.00094
			DumpExcess = False
		}
	}
}