//Cabin huge:
@PART[dsak_cabin3]:NEEDS[TacLifeSupport&!Snacks]
{
	@entryCost *= 1.2
	@cost *= 1.4
	@tags = tacls life support battery electric cabin cck-lifesupport
	-MODEL {}
	MODEL
	{
		model = Squad/Parts/FuelTank/mk3Fuselage/CREW
		texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3_core_tac
		texture = Mk3Fuselage_LUM, DeepSky/AirlineKuisine/TexturesMk3/Mk3Fuselage_LUM
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 1000
		maxAmount = 1000
	}
}

//Processor A: Greenhouse
@PART[dsak_proc_3a]:NEEDS[TacLifeSupport&!Snacks]
{
	@entryCost *= 1.6
	@cost *= 2.2
	@mass *= 1.44
	@title = Mk3 Advanced Greenhouse
	@description = With all the strides that had been taken to enable kerbalkind to cross the vacuum of space, it was surprising to wake up and find that there was next to no investment in persistence once that vacuum was crossed. The one name out there who had an answer, SETI, was approached and their gardening technology was leased and adapted, and this variant of the classic space garden was created. Rather than exclusive Nutrients, standardized Minerals can be extracted from Food but a lot more Food at once, and more Minerals can be stored within. Lastly, the advanced greenhouse supports 2 kerbals at a time...for a very long time.
	@tags = tacls life support sabatier recycler air filter converter cck-lifesupport
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_a_tac
	}
	
	MODULE
	{
		//Uses CRP Minerals instead of own custom Nutrient resource.
		//Food or Nutrient to Mineral ratio is 960.7547:1
		//Siphon's Food intake rate scaled to ratio.
		//Greenhouse's Mineral intake rate scaled to ratio.
		
		name = TacGenericConverter
		ConverterName = Mineral Siphon
		StartActionName = Start Mineral Siphon
		StopActionName = Stop Mineral Siphon
		tag = Life Support
		GeneratesHeat = false
		conversionRate = 1.02
		INPUT_RESOURCE
		{
            ResourceName = Food
            Ratio = 0.003252548568927
		}
		INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 2.0
        }
		OUTPUT_RESOURCE
		{
            ResourceName = Minerals
            Ratio = 0.0000033854166666
            DumpExcess = false
		}

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1		
	}
	
	RESOURCE
	{
		name = Minerals
		amount = 0
		maxAmount = 6
	}
	RESOURCE
	{
		name = Waste
		amount = 0
		maxAmount = 1
	}
	RESOURCE
	{
		name = WasteWater
		amount = 0
		maxAmount = 10
	}
	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 200
	}
	RESOURCE
	{
		name = ElectricCharge
		amount = 2000
		maxAmount = 2000
	}
	
	MODULE
	{
		name = TacGenericConverter
		ConverterName = SETI-Greenhouse
		StartActionName = Start Greenhouse
		StopActionName = Stop Greenhouse	
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 2.04		
		INPUT_RESOURCE
        {
            ResourceName = CarbonDioxide
            Ratio = 0.00148012889876
        }
        INPUT_RESOURCE
        {
            ResourceName = WasteWater
            Ratio = 0.000014247685185
        }
        INPUT_RESOURCE
        {
            ResourceName = Waste
            Ratio = 0.000001539351852
        }
        INPUT_RESOURCE
        {
            ResourceName = Minerals
            Ratio = 0.0000000035237055479406 //0.0000033854166666
        }
        INPUT_RESOURCE
        {
            ResourceName = ElectricCharge
            Ratio = 6.0
        }
		OUTPUT_RESOURCE
        {
            ResourceName = Oxygen
            Ratio = 0.001713537562385
            DumpExcess = false
        }
        OUTPUT_RESOURCE
        {
            ResourceName = Water
            Ratio = 0.0000100692708336
            DumpExcess = false
        }
        OUTPUT_RESOURCE
        {
            ResourceName = Food
            Ratio = 0.000016927083333
            DumpExcess = false
        }

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1		
	}
}

@PART[dsak_proc_3a]:NEEDS[!BackgroundProcessing]
{
	//Reduced energy consumption for when a ship with this part cannot recharge on rails.
	@MODULE:HAS[#ConverterName[SETI-Greenhouse]]
	{
		@INPUT_RESOURCE:HAS[#ResourceName[ElectricCharge]]
		{
			@Ratio = 1.2
		}
	}
}


//Processor B: Water
@PART[dsak_proc_3b]:NEEDS[TacLifeSupport&!Snacks]
{
	@entryCost *= 1.2
	@cost *= 1.8
	@mass *= 1.4
	@title = Mk3 Dual-Core Water Processor
	@description = Contains one of each variant of TAC's 3.75m water processing modules, expanded for 38.7% more conversion power and hotwired together within one shell. This device uses electrolysis to provide Oxygen for (expected) 11 kerbals, and purifies water for (expected) 13 kerbals.
	@tags = tacls life support water splitter purifier recycler converter cck-lifesupport
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_b_tac
	}
	
	//Water Purifier
	MODULE
	{
		name = TacGenericConverter
		ConverterName = Water Purifier
		StartActionName = Start WaterPurifier
		StopActionName = Stop WaterPurifier
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 14.33
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.007123842592593
		}
		INPUT_RESOURCE
		{
			ResourceName = WasteWater
			Ratio = 0.000014247685185
		}		
		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.000011188078704
			DumpExcess = false
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.000001994675926
			DumpExcess = true
		}	

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
	}
	
	//Water Splitter
	MODULE
	{
		name = TacGenericConverter
		ConverterName = Water Splitter
		StartActionName = Start WaterSplitter
		StopActionName = Stop WaterSplitter
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 14.33
		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.039783051310155
		}
		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.000002720508341
		}		
		OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001713537562385
			DumpExcess = false
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.000000405893838
			DumpExcess = true
		}	
		
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
	}

	RESOURCE
	{
		name = WasteWater
		amount = 0
		maxAmount = 4
	}
}

//Processor C: Carbon
@PART[dsak_proc_3c]:NEEDS[TacLifeSupport&!Snacks]
{
	@entryCost *= 1.3
	@cost *= 1.8
	@mass *= 1.3
	@title = Mk3 Dual-Core Carbon Processor
	@description = Contains one of each variant of TAC's 3.75m carbon processing modules, expanded for 38.7% more conversion power and hotwired together within one shell. Its Sabatier mode which additionally requires water, recycles oxygen for (expected) 13 kerbals, meanwhile its Bosch Reactor receycles oxygen for (expected) 13 kerbals.
	@tags = tacls life support sabatier recycler carbon extractor converter cck-lifesupport
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_c_tac
	}
	
	//Sabatier
	MODULE
	{
		name = TacGenericConverter
		ConverterName = Sabatier Recycler
		StartActionName = Start Sabatier
		StopActionName = Stop Sabatier	
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 14.33
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.039783051310155
		}
		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio = 0.000851605032367
		}
		INPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.000001360254171
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001713537562385
			DumpExcess = false
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.000000807530168
			DumpExcess = true
		}	

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
	}

	//Extractor
	MODULE
	{
		name = TacGenericConverter
		ConverterName = Carbon Extractor
		StartActionName = Start CarbonExtractor
		StopActionName = Stop CarbonExtractor	
		tag = Life Support		
		GeneratesHeat = false
		conversionRate = 14.33
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.039783051310155
		}
		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio = 0.001703210064733
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.001713537562385
			DumpExcess = false
		}	
		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.000001209166498
			DumpExcess = true
		}

		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.5
		SpecialistBonusBase = 1
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1		
	}
	
	RESOURCE
	{
		name = CarbonDioxide
		amount = 0
		maxAmount = 1014
	}
}